var smtp = require('../config').smtp
  , nodemailer = require('nodemailer')
  , URI = smtp.protocol + '://' +
//          smtp:user + ':' + smtp.pass + '@' +
          smtp.host
;

function MODULE(){ 
  this.sendMail = function(mail, fn){
    mail.from = mail.from || smtp.from;
    var SmtpClient = nodemailer.createTransport(URI);
    SmtpClient.sendMail(mail, function(error, info){
      if(error){info = null};
      fn(error, info);
    });
  } 
} // End of module

module.exports = new MODULE();
