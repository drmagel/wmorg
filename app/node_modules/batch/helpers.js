// BATCH heplers

function createApplication(Application, callback){
  var callback = callback || function(){};
  count.get('appID', function(e,r){
  if(e){return console.error("BATCH:"+batch+":count.get: "+e)};
    Application.appID = r.value.seq;
    applications.insert(Application, function(e,r){
      if(e){return console.error("BATCH:"+batch+":applications.insert: "+e)};
      delete Application._id;
      callback(Application);
    });
  });
};

function archiveApplication(Application, callback){
  var callback = callback || function(){};
  applications.remove(Application.appID, function(e){
    if(e){return console.error("BATCH:"+batch+":applicaitons.remove: "+e)};
    Application.archiveDateDate = new Date().getTime();
    apparchive.insert(Application, function(e){
      if(e){return console.error("BATCH:"+batch+":apparchive.insert: "+e)};
      delete Application._id;
      callback(Application);      
    }); // apparchive.insert
  }); // applications.remove
};

// BATCH apis
