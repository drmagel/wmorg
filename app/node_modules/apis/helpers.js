function registrationMail(lang, email, str, num) {
  var tr = trans.init(lang);
  return {
    from: "noreply@amdocs.com",
    to: email,
    subject: tr.tr('thanksForЕnrolling'),
    html: "<body style='tab-interval:.5in'> <div style='direction:"
           + tr.direction() +
          "'> <p class=MsoNormal>"
           + tr.tr('thanksForЕnrollingToWMOrg') +
          "<p class=MsoNormal><o:p>&nbsp;</o:p></p>"
           + tr.tr('theVerificationNumberIs') +
          "<span style='mso-tab-count:1'>   </span>" +
          "<span style='font-size:14.0pt;color:#00B0F0'>"
           + num +
          "<o:p></o:p></span></p><p class=MsoNormal>"
           + tr.tr('theVerificationStringIs') +
          "<span style='mso-tab-count:1'>   </span>" +
          "<span style='font-size:18.0pt;color:#76923C'>"
           + str +
          "</span><p class=MsoNormal><o:p>&nbsp;</o:p></p>"
           + tr.tr('bestRegards') +
          "</p> <p class=MsoNormal>"
           + tr.tr('WMOrgTeam') +
          "</p></div></body>"
  };
};

function errResponse(reason, body, res){
  body.reason = reason;
  body.result = false;
  return res.json(body); 
};

function createApplication(Application, callback){
  var callback = callback || function(){};
  count.get('appID', function(e,r){
  if(e){return res.status(500).json({error: "API:"+api+":count.get: "+e})};
    Application.appID = r.value.seq;
    applications.insert(Application, function(e,r){
      if(e){return res.status(500).json({error: "API:"+api+":applications.insert: "+e})};
      delete Application._id;
      callback(Application);
    });
  });
};

function archiveApplication(Application, callback){
  var callback = callback || function(){};
  applications.remove(Application.appID, function(e){
    if(e){return res.status(500).json({error: "API:"+api+":applications.remove: "+e})};
    Application.completionDate = new Date().getTime();
    apparchive.insert(Application, function(e){});
      if(e){return res.status(500).json({error: "API:"+api+":apparchive.insert: "+e})};
      delete Application._id;
      callback(Application);
  });
};

// APIs
