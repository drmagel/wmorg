#!/bin/env node

var users  =  require('../models')('users');
var count = require('../models')('counters');

//var users = new Users();
//var count = new Count();

console.log(users);
console.log(count);


var MongoClient = require('mongodb').MongoClient,
    mongo = require('../config/config').mongo;

// Test values
var newMember = 100001011,
    newRegion = "Jerusalem",

    KukuPetAdmin = {
  userID: 100001001,
  firstName: {  eng: 'Kuku',
                rus: 'Куку',
                heb: 'קוקו'
  },
  familyName: { eng: 'Pet',
                rus: 'Пет',
                heb: 'פט'
  },
  pictureURL: '/pub/users/photos/100001001.jpg',
  country: 'Israel',
  region: 'HaSharon',
  language: 'rus',
  members: [100001012,100001025,100001020,100001014,100001015]
};

// DB connection URI
var dbURI = 'mongodb://' +
  mongo.dbuser +
  ':' +
  mongo.dbpass +
  '@' +
  mongo.host +
  ':' +
  mongo.port +
  '/' + mongo.dbname;

// Test
MongoClient.connect(dbURI, function(err, db) {
     users.setDB(db);
     count.setDB(db);
//     model.insert(KukuPetAdmin, function(e,r){console.log(r);db.close()});
//     model.addMember(KukuPetAdmin.userID, newMember, function(e,r){console.log(r);db.close()});     
//     model.delMember(KukuPetAdmin.userID, newMember, function(e,r){console.log(r);db.close()});     
     db.close();
});

//    model.setCollection(collectionName);
//  model.prototype = Model.prototype;
//  model.setCollection('users');
// console.log(model.prototype);

/*
console.log('Test.js:model:');
console.log(model);
console.log('Test.js:model.setDB ');
console.log(model.setDB);

console.log('Test.js:model.remove:');
console.log(model.remove);
console.log('Test.js:model.collection:');
console.log(model.collection);
console.log('Test.js:model.db:');
console.log(model.db);
console.log('Test.js:model.s.name:');
console.log(model.collection.s.name);
*/
