// TEST TOOLS Heplers

function createApplication(Application, callback){
  var callback = callback || function(){};
  count.get('appID', function(e,r){
  if(e){return console.error("TT:"+tt+":count.get: "+e)};
    Application.appID = r.value.seq;
    applications.insert(Application, function(e,r){
      if(e){return console.error("TT:"+tt+":applications.insert: "+e)};
      delete Application._id;
      return callback(Application);
    });
  });
};

function archiveApplication(Application, callback){
  var callback = callback || function(){};
  applicaitons.remove(Application.appID, function(e){
    if(e){return console.error("BATCH:"+tt+":applicaitons.remove: "+e)};
    Application.archiveDateDate = new Date().getTime();
    apparchive.insert(Application, function(e){});
      if(e){return console.error("BATCH:"+tt+":apparchive.insert: "+e)};
      delete Application._id;
      return callback(Application);
  });
};

function generateDate(num){
  var num = num || 0
    , delay = 2 // initial number of days ago
    , d = new Date()
    , d = new Date(d.setDate(d.getDate() - delay))
    ;
    if(num){d = new Date(d.setMonth(d.getMonth() - num))}
  return  d.getTime();
};

// TEST TOOLS APIs
